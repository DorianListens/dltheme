!function(t){"use strict";function e(){this.$dom=t(document),this.$html=this.$dom.find("html"),this.isOldie=!!this.$html.hasClass("oldie"),this.click="click",this.onReady=this.onOldie=this.onTouch=!1,this.autoInit="false"===t("script[gumby-init]").attr("gumby-init")?!1:!0,this.debugMode=Boolean(t("script[gumby-debug]").length),this.touchDevice=!!(Modernizr.touch||window.navigator.userAgent.indexOf("Windows Phone")>0),this.gumbyTouch=!1,this.touchEvents="js/libs",this.breakpoint=Number(t("script[gumby-breakpoint]").attr("gumby-breakpoint"))||768,this.touchEventsLoaded=!1,this.uiModulesReady=!1,this.uiModules={},this.inits={};var e=t("script[gumby-touch]").attr("gumby-touch"),i=t("script[gumby-path]").attr("gumby-path");"false"===e?this.touchEvents=!1:e?this.touchEvents=e:i&&(this.touchEvents=i),this.touchDevice&&(this.click+=" tap"),this.touchDevice&&t(window).width()<this.breakpoint?(this.$html.addClass("gumby-touch"),this.gumbyTouch=!0):this.$html.addClass("gumby-no-touch"),this.debugMode&&this.debug("Gumby is in debug mode")}e.prototype.init=function(t){var e=this,i=t?t:{};return this.$dom.ready(function(){i.debug&&(e.debugMode=!0),e.debug("Initializing Gumby");var t=i.uiModules?i.uiModules:!1;e.initUIModules(t),e.onReady&&e.onReady(),e.isOldie&&e.onOldie&&e.onOldie(),Modernizr.touch&&e.onTouch&&e.onTouch()}),this},e.prototype.helpers=function(){this.onReady&&this.onReady(),this.isOldie&&this.onOldie&&this.onOldie(),Modernizr.touch&&this.onTouch&&this.onTouch()},e.prototype.ready=function(t){return t&&"function"==typeof t&&(this.onReady=t),this},e.prototype.oldie=function(t){return t&&"function"==typeof t&&(this.onOldie=t),this},e.prototype.touch=function(t){return t&&"function"==typeof t&&(this.onTouch=t),this},e.prototype.console=function(t,e){this.debugMode&&window.console&&console[console[t]?t:"log"](e.length>1?Array.prototype.slice.call(e):e[0])},e.prototype.log=function(){this.console("log",arguments)},e.prototype.debug=function(){this.console("debug",arguments)},e.prototype.warn=function(){this.console("warn",arguments)},e.prototype.error=function(){this.console("error",arguments)},e.prototype.dump=function(){return{$dom:this.$dom,isOldie:this.isOldie,touchEvents:this.touchEvents,debugMode:this.debugMode,autoInit:this.autoInit,uiModules:this.uiModules,click:this.click}},e.prototype.selectAttr=function(){for(var t=0;t<arguments.length;t++){var e=arguments[t],i="data-"+arguments[t],n="gumby-"+arguments[t];if(this.is("["+i+"]"))return this.attr(i)?this.attr(i):!0;if(this.is("["+n+"]"))return this.attr(n)?this.attr(n):!0;if(this.is("["+e+"]"))return this.attr(e)?this.attr(e):!0}return!1},e.prototype.addInitalisation=function(t,e){this.inits[t]=e},e.prototype.initialize=function(t,e){if("object"==typeof t){var i=0;for(i;i<t.length;i++)this.inits[t[i]]&&"function"==typeof this.inits[t[i]]?this.inits[t[i]](e):this.error("Error initializing module: "+t[i])}else this.inits[t]&&"function"==typeof this.inits[t]?this.inits[t](e):this.error("Error initializing module: "+t);return this},e.prototype.UIModule=function(t){var e=t.module;this.uiModules[e]=t},e.prototype.initUIModules=function(t){var e,i,n=this.uiModules;t&&(n=t);for(e in n)i=t?n[e]:e,this.uiModules[i].init()},window.Gumby=new e}(jQuery),!function(t){"use strict";function e(t){Gumby.debug("Initializing Checkbox",t),this.$el=t,this.$input=this.$el.find("input[type=checkbox]");var e=this;this.$el.on(Gumby.click,function(t){t.preventDefault(),e.$input.is("[disabled]")||(e.$el.hasClass("checked")?e.update(!1):e.update(!0))}).on("gumby.check",function(){Gumby.debug("Check event triggered",e.$el),e.update(!0)}).on("gumby.uncheck",function(){Gumby.debug("Uncheck event triggered",e.$el),e.update(!1)}),(this.$input.prop("checked")||this.$el.hasClass("checked"))&&e.update(!0)}e.prototype.update=function(t){var e=this.$el.find("span");t?(Gumby.debug("Checking Checkbox",this.$el),e.append('<i class="icon-check" />'),this.$input.prop("checked",!0),Gumby.debug("Triggering onCheck event",this.$el),Gumby.debug("Triggering onChange event",this.$el),this.$el.addClass("checked").trigger("gumby.onCheck").trigger("gumby.onChange")):(Gumby.debug("Unchecking Checkbox",this.$el),this.$input.prop("checked",!1),e.find("i").remove(),Gumby.debug("Triggering onUncheck event",this.$el),Gumby.debug("Triggering onChange event",this.$el),this.$el.removeClass("checked").trigger("gumby.onUncheck").trigger("gumby.onChange"))},Gumby.addInitalisation("checkbox",function(){t(".checkbox").each(function(){var i=t(this);return i.data("isCheckbox")?!0:(i.data("isCheckbox",!0),new e(i),void 0)})}),Gumby.UIModule({module:"checkbox",events:["onCheck","onUncheck","onChange","check","uncheck"],init:function(){Gumby.initialize("checkbox")}})}(jQuery),!function(t){"use strict";function e(e){Gumby.debug("Initializing Fixed Position",e),this.$el=e,this.fixedPoint="",this.pinPoint=!1,this.offset=0,this.pinOffset=0,this.top=0,this.constrainEl=!0,this.state=!1,this.measurements={left:0,width:0},this.setup();var i=this;t(window).on("scroll load",function(){i.monitorScroll()}),this.$el.on("gumby.initialize",function(){Gumby.debug("Re-initializing Fixed Position",e),i.setup(),i.monitorScroll()})}e.prototype.setup=function(){var e=this;this.fixedPoint=this.parseAttrValue(Gumby.selectAttr.apply(this.$el,["fixed"])),this.pinPoint=Gumby.selectAttr.apply(this.$el,["pin"])||!1,this.offset=Number(Gumby.selectAttr.apply(this.$el,["offset"]))||0,this.pinOffset=Number(Gumby.selectAttr.apply(this.$el,["pinoffset"]))||0,this.top=Number(Gumby.selectAttr.apply(this.$el,["top"]))||0,this.constrainEl=Gumby.selectAttr.apply(this.$el,["constrain"])||!0,"false"===this.constrainEl&&(this.constrainEl=!1),this.$parent=this.$el.parents(".columns, .column, .row"),this.$parent=this.$parent.length?this.$parent.first():!1,this.parentRow=this.$parent?!!this.$parent.hasClass("row"):!1,this.pinPoint&&(this.pinPoint=this.parseAttrValue(this.pinPoint)),this.$parent&&this.constrainEl&&(this.measure(),t(window).resize(function(){e.state&&(e.measure(),e.constrain())}))},e.prototype.monitorScroll=function(){var e=t(window).scrollTop(),i=this.fixedPoint instanceof jQuery?this.fixedPoint.offset().top:this.fixedPoint,n=!1;this.pinPoint&&(n=this.pinPoint instanceof jQuery?this.pinPoint.offset().top:this.pinPoint),this.offset&&(i-=this.offset),this.pinOffset&&(n-=this.pinOffset),e>=i&&"fixed"!==this.state?(!n||n>e)&&this.fix():i>e&&"fixed"===this.state?this.unfix():n&&e>=n&&"pinned"!==this.state&&this.pin()},e.prototype.fix=function(){Gumby.debug("Element has been fixed",this.$el),Gumby.debug("Triggering onFixed event",this.$el),this.state="fixed",this.$el.css({top:0+this.top}).addClass("fixed").removeClass("unfixed pinned").trigger("gumby.onFixed"),this.$parent&&this.constrain()},e.prototype.unfix=function(){Gumby.debug("Element has been unfixed",this.$el),Gumby.debug("Triggering onUnfixed event",this.$el),this.state="unfixed",this.$el.addClass("unfixed").removeClass("fixed pinned").trigger("gumby.onUnfixed")},e.prototype.pin=function(){Gumby.debug("Element has been pinned",this.$el),Gumby.debug("Triggering onPinned event",this.$el),this.state="pinned",this.$el.css({top:this.$el.offset().top}).addClass("pinned fixed").removeClass("unfixed").trigger("gumby.onPinned")},e.prototype.constrain=function(){Gumby.debug("Constraining element",this.$el),this.$el.css({left:this.measurements.left,width:this.measurements.width})},e.prototype.measure=function(){var t,e=this.$parent.offset();this.measurements.left=e.left,this.measurements.width=this.$parent.width(),this.parentRow&&(t=Number(this.$parent.css("paddingLeft").replace(/px/,"")),t&&(this.measurements.left+=t))},e.prototype.parseAttrValue=function(e){if(t.isNumeric(e))return Number(e);if("top"===e)return this.$el.offset().top;var i=t(e);return i.length?i:(Gumby.error("Cannot find Fixed target: "+e),!1)},Gumby.addInitalisation("fixed",function(i){t("[data-fixed],[gumby-fixed],[fixed]").each(function(){var n=t(this);return n.data("isFixed")&&!i?!0:n.data("isFixed")&&i?(n.trigger("gumby.initialize"),!0):(n.data("isFixed",!0),new e(n),void 0)})}),Gumby.UIModule({module:"fixed",events:["initialize","onFixed","onUnfixed"],init:function(){Gumby.initialize("fixed")}})}(jQuery),!function(t){"use strict";function e(t){Gumby.debug("Initializing Navbar",t),this.$el=t,this.$dropDowns=this.$el.find("li:has(.dropdown)"),this.$dropDowns.on(Gumby.click,this.toggleDropdown).on("swiperight",this.openLink),"#"!==this.$dropDowns.children("a").attr("href")&&this.$dropDowns.children("a").append('<i class="icon-popup"></i>').children("i").on(Gumby.click,this.openLink),this.$dropDowns.find(".dropdown li:not(:has(.dropdown)) a[href]").on(Gumby.click,this.openLink)}Gumby.gumbyTouch&&(e.prototype.toggleDropdown=function(e){e.preventDefault();var i=t(this);i.hasClass("active")?i.removeClass("active"):i.addClass("active")},e.prototype.openLink=function(e){e.preventDefault();var i,n=t(this),o=n;n.is("i")?o=n.parent("a"):n.is("li")&&(o=n.children("a")),i=o.attr("href"),"blank"==o.attr("target")?window.open(i):window.location=i},Gumby.addInitalisation("navbar",function(){t(".navbar").each(function(){var i=t(this);return i.data("isNavbar")?!0:(i.data("isNavbar",!0),new e(i),void 0)})}),Gumby.UIModule({module:"navbar",events:[],init:function(){Gumby.initialize("navbar")}}))}(jQuery),!function(t){"use strict";function e(t){Gumby.debug("Initializing Radio Button",t),this.$el=t,this.$input=this.$el.find("input[type=radio]");var e=this;this.$el.on(Gumby.click,function(t){t.preventDefault(),e.$input.is("[disabled]")||e.update()}).on("gumby.check",function(){Gumby.debug("Check event triggered",e.$el),e.update()}),(this.$input.prop("checked")||this.$el.hasClass("checked"))&&e.update(!0)}e.prototype.update=function(){if(!(this.$el.hasClass("checked")&&this.$input.prop("checked")&&this.$el.find("i.icon-dot").length)){Gumby.debug("Updating Radio Button group",this.$el);var e=this.$el.find("span"),i='input[name="'+this.$input.attr("name")+'"]';t(".radio").has(i).removeClass("checked").find("input").prop("checked",!1).end().find("i").remove(),this.$input.prop("checked",!0),e.append('<i class="icon-dot" />'),Gumby.debug("Triggering onCheck event",this.$el),this.$el.addClass("checked").trigger("gumby.onCheck")}},Gumby.addInitalisation("radiobtn",function(){t(".radio").each(function(){var i=t(this);return i.data("isRadioBtn")?!0:(i.data("isRadioBtn",!0),new e(i),void 0)})}),Gumby.UIModule({module:"radiobtn",events:["onCheck","check"],init:function(){Gumby.initialize("radiobtn")}})}(jQuery),!function(t){"use strict";function e(e){Gumby.debug("Initializing Retina",e),this.$el=e,this.imageSrc=this.$el.attr("src"),this.retinaSrc=this.fetchRetinaImage(),this.$retinaImg=t(new Image);var i=this;return this.retinaSrc?(this.$retinaImg.attr("src",this.retinaSrc).load(function(){i.retinaImageLoaded()}).error(function(){Gumby.error("Couln't load retina image: "+i.retinaSrc)}),void 0):!1}e.prototype.fetchRetinaImage=function(){var t=this.imageSrc,e=this.imageSrc.search(/(\.|\/)(gif|jpe?g|png)$/i);return 0>e?!1:t.substr(0,e)+"@2x"+t.substr(e,t.length)},e.prototype.retinaImageLoaded=function(){Gumby.debug("Swapping image for retina version",this.$el),Gumby.debug("Triggering onRetina event",this.$el),this.$el.attr("src",this.$retinaImg.attr("src")).trigger("gumby.onRetina")},Gumby.addInitalisation("retina",function(){!window.devicePixelRatio||window.devicePixelRatio<=1||t("img[data-retina],img[gumby-retina],img[retina]").each(function(){var i=t(this);return i.data("isRetina")?!0:(i.data("isRetina",!0),new e(i),void 0)})}),Gumby.UIModule({module:"retina",events:["onRetina"],init:function(){Gumby.initialize("retina")}})}(jQuery),!function(t){"use strict";function e(t){Gumby.debug("Initializing Skiplink",t),this.$el=t,this.targetPos=0,this.duration=0,this.offset=!1,this.easing="",this.update=!1,this.setup();var e=this;this.$el.on(Gumby.click+" gumby.skip",function(t){t.preventDefault(),"skip"===t.namespace&&Gumby.debug("Skip event triggered",e.$el),e.update?e.calculateTarget(e.skipTo):e.skipTo()}).on("gumby.initialize",function(){Gumby.debug("Re-initializing Skiplink",e.$el),e.setup()})}e.prototype.setup=function(){this.duration=Number(Gumby.selectAttr.apply(this.$el,["duration"]))||200,this.offset=Gumby.selectAttr.apply(this.$el,["offset"])||!1,this.easing=Gumby.selectAttr.apply(this.$el,["easing"])||"swing",this.update=Gumby.selectAttr.apply(this.$el,["update"])?!0:!1,this.calculateTarget()},e.prototype.calculateTarget=function(e){var i,n=Gumby.selectAttr.apply(this.$el,["goto"]);if("top"==n)this.targetPos=0;else if(t.isNumeric(n))this.targetPos=Number(n);else{if(i=t(n),!i.length)return Gumby.error("Cannot find skiplink target: "+n),!1;this.targetPos=i.offset().top}e&&e.apply(this)},e.prototype.skipTo=function(){Gumby.debug("Skipping to target",this.$el);var e=this;t("html,body").animate({scrollTop:this.calculateOffset()},this.duration,this.easing).promise().done(function(){Gumby.debug("Triggering onComplete event",e.$el),e.$el.trigger("gumby.onComplete")})},e.prototype.calculateOffset=function(){if(!this.offset)return this.targetPos;var t=this.offset.substr(0,1),e=Number(this.offset.substr(1,this.offset.length));return"-"===t?this.targetPos-e:"+"===t?this.targetPos+e:void 0},Gumby.addInitalisation("skiplink",function(i){t(".skiplink > a, .skip").each(function(){var n=t(this);return n.data("isSkipLink")&&!i?!0:n.data("isSkipLink")&&i?(n.trigger("gumby.initialize"),!0):(n.data("isSkipLink",!0),new e(n),void 0)})}),Gumby.UIModule({module:"skiplink",events:["initialize","onComplete","skip"],init:function(){Gumby.initialize("skiplink")}})}(jQuery),!function(t){"use strict";function e(e){Gumby.debug("Initializing Tabs",e),this.$el=e,this.$nav=this.$el.find("ul.tab-nav > li"),this.$content=this.$el.find(".tab-content");var i=this;this.$nav.children("a").on(Gumby.click,function(e){e.preventDefault(),i.click(t(this))}),this.$el.on("gumby.set",function(t,e){Gumby.debug("Set event triggered",i.$el),i.set(t,e)})}e.prototype.click=function(t){var e=t.parent().index();this.$nav.eq(e).add(this.$content.eq(e)).hasClass("active")||(Gumby.debug("Setting active tab to "+e,this.$el),this.$nav.add(this.$content).removeClass("active"),this.$nav.eq(e).add(this.$content.eq(e)).addClass("active"),Gumby.debug("Triggering onChange event",this.$el),this.$el.trigger("gumby.onChange",e))},e.prototype.set=function(t,e){this.$nav.eq(e).find("a").trigger(Gumby.click)},Gumby.addInitalisation("tabs",function(){t(".tabs").each(function(){var i=t(this);return i.data("isTabs")?!0:(i.data("isTabs",!0),new e(i),void 0)})}),Gumby.UIModule({module:"tabs",events:["onChange","set"],init:function(){Gumby.initialize("tabs")}})}(jQuery),!function(t){"use strict";function e(e){this.$el=t(e),this.targets=[],this.on="",this.className="",this.self=!1,this.$el.length&&(Gumby.debug("Initializing Toggle",e),this.init())}function i(e){this.$el=t(e),this.targets=[],this.on="",this.className="",this.self=!1,this.$el.length&&(Gumby.debug("Initializing Switch",e),this.init())}e.prototype.init=function(){var t=this;this.setup(),this.$el.on(this.on,function(e){e.preventDefault(),t.trigger(t.triggered)}).on("gumby.trigger",function(){Gumby.debug("Trigger event triggered",t.$el),t.trigger(t.triggered)}).on("gumby.initialize",function(){Gumby.debug("Re-initializing "+t.constructor,$el),t.setup()})},e.prototype.setup=function(){this.targets=this.parseTargets(),this.on=Gumby.selectAttr.apply(this.$el,["on"])||Gumby.click,this.className=Gumby.selectAttr.apply(this.$el,["classname"])||"active",this.self="false"===Gumby.selectAttr.apply(this.$el,["self"])},e.prototype.parseTargets=function(){var e=Gumby.selectAttr.apply(this.$el,["trigger"]),i=0,n=[];return e?(i=e.indexOf("|"),-1===i?this.checkTargets([e])?[t(e)]:!1:(n=e.split("|"),this.checkTargets(n)?n.length>1?[t(n[0]),t(n[1])]:[t(n[0])]:!1)):!1},e.prototype.checkTargets=function(e){var i=0;for(i;i<e.length;i++)if(e[i]&&!t(e[i]).length)return Gumby.error("Cannot find "+this.constructor.name+" target: "+e[i]),!1;return!0},e.prototype.triggered=function(){Gumby.debug("Triggering onTrigger event",this.$el),this.$el.trigger("gumby.onTrigger",[this.$el.hasClass(this.className)])},i.prototype=new e,i.prototype.constructor=i,e.prototype.trigger=function(t){Gumby.debug("Triggering Toggle",this.$el);var e;this.targets?1==this.targets.length?this.$el.add(this.targets[0]).toggleClass(this.className):this.targets.length>1&&(this.targets[0].hasClass(this.className)?(e=this.targets[0],this.self||(e=e.add(this.$el)),e.removeClass(this.className),this.targets[1].addClass(this.className)):(e=this.targets[0],this.self||(e=e.add(this.$el)),e.addClass(this.className),this.targets[1].removeClass(this.className))):this.$el.toggleClass(this.className),t&&"function"==typeof t&&t.apply(this)},i.prototype.trigger=function(t){Gumby.debug("Triggering Switch",this.$el);var e;this.targets?1==this.targets.length?(e=this.targets[0],this.self||(e=e.add(this.$el)),e.addClass(this.className)):this.targets.length>1&&(e=this.targets[0],this.self||(e=e.add(this.$el)),e.addClass(this.className),this.targets[1].removeClass(this.className)):this.$el.addClass(this.className),t&&"function"==typeof t&&t.apply(this)},Gumby.addInitalisation("toggles",function(i){t(".toggle").each(function(){var n=t(this);return n.data("isToggle")&&!i?!0:(n.data("isToggle")&&i&&n.trigger("gumby.initialize"),n.data("isToggle",!0),new e(n),void 0)})}),Gumby.addInitalisation("switches",function(e){t(".switch").each(function(){var n=t(this);return n.data("isSwitch")&&!e?!0:n.data("isSwitch")&&e?(n.trigger("gumby.initialize"),!0):(n.data("isSwitch",!0),new i(n),void 0)})}),Gumby.UIModule({module:"toggleswitch",events:["initialize","trigger","onTrigger"],init:function(){Gumby.initialize("switches"),Gumby.initialize("toggles")}})}(jQuery),!function(t){"use strict";function e(t,e){Gumby&&Gumby.debug("Initializing Validation",t),this.$this=t,this.$field=this.$this.parents(".field"),this.req=e||function(){return!!this.$this.val().length};var i=this;this.$this.is("[type=checkbox], [type=radio]")?(this.$field=this.$this.parent("label"),this.$field.on("gumby.onChange",function(){i.validate()})):this.$this.is("select")?(this.$field=this.$this.parents(".picker"),this.$field.on("change",function(){i.validate()})):this.$this.on("blur",function(t){9!==t.which&&i.validate()})}e.prototype.validate=function(){var t=this.req(this.$this);return t?this.$field.removeClass("danger").addClass("success"):this.$field.removeClass("success").addClass("danger"),t},t.fn.validation=function(i){var n=t.extend({submit:!1,fail:!1,required:[]},i),o=[];return this.each(function(){if(!n.required.length)return!1;var i,a=t(this),s=n.required.length;for(i=0;s>i;i++)o.push(new e(a.find('[name="'+n.required[i].name+'"]'),n.required[i].validate||!1));a.on("submit",function(t){var e=!1;if(!a.data("passed")){t.preventDefault();var i,s=o.length;for(i=0;s>i;i++)o[i].validate()||(e=!0);if(e){if(n.fail&&"function"==typeof n.fail)return n.fail(),void 0}else{if(n.submit&&"function"==typeof n.submit)return n.submit(a.serializeArray()),void 0;a.data("passed",!0).submit()}}})})}}(jQuery),!function(t){"use strict";Gumby.touchDevice&&Gumby.touchEvents||!Gumby.autoInit?Gumby.touchEvents&&Gumby.touchDevice&&(Gumby.debug("Loading jQuery mobile touch events"),yepnope.errorTimeout=2e3,Modernizr.load({test:Modernizr.touch,yep:Gumby.touchEvents+"/jquery.mobile.custom.min.js",complete:function(){t.mobile||Gumby.error("Error loading jQuery mobile touch events"),Gumby.touchEventsLoaded=!0,Gumby.autoInit?window.Gumby.init():Gumby.uiModulesReady&&Gumby.helpers()}})):window.Gumby.init(),"function"==typeof define&&define.amd&&define(window.Gumby)}(jQuery),function(t,e,i){function n(t){var e={},n=/^jQuery\d+$/;return i.each(t.attributes,function(t,i){i.specified&&!n.test(i.name)&&(e[i.name]=i.value)}),e}function o(t,n){var o=this,a=i(o);if(o.value==a.attr("placeholder")&&a.hasClass("placeholder"))if(a.data("placeholder-password")){if(a=a.hide().next().show().attr("id",a.removeAttr("id").data("placeholder-id")),t===!0)return a[0].value=n;a.focus()}else o.value="",a.removeClass("placeholder"),o==e.activeElement&&o.select()}function a(){var t,e=this,a=i(e),s=this.id;if(""==e.value){if("password"==e.type){if(!a.data("placeholder-textinput")){try{t=a.clone().attr({type:"text"})}catch(r){t=i("<input>").attr(i.extend(n(this),{type:"text"}))}t.removeAttr("name").data({"placeholder-password":!0,"placeholder-id":s}).bind("focus.placeholder",o),a.data({"placeholder-textinput":t,"placeholder-id":s}).before(t)}a=a.removeAttr("id").hide().prev().attr("id",s).show()}a.addClass("placeholder"),a[0].value=a.attr("placeholder")}else a.removeClass("placeholder")}var s,r,l="placeholder"in e.createElement("input"),c="placeholder"in e.createElement("textarea"),h=i.fn,u=i.valHooks;l&&c?(r=h.placeholder=function(){return this},r.input=r.textarea=!0):(r=h.placeholder=function(){var t=this;return t.filter((l?"textarea":":input")+"[placeholder]").not(".placeholder").bind({"focus.placeholder":o,"blur.placeholder":a}).data("placeholder-enabled",!0).trigger("blur.placeholder"),t},r.input=l,r.textarea=c,s={get:function(t){var e=i(t);return e.data("placeholder-enabled")&&e.hasClass("placeholder")?"":t.value},set:function(t,n){var s=i(t);return s.data("placeholder-enabled")?(""==n?(t.value=n,t!=e.activeElement&&a.call(t)):s.hasClass("placeholder")?o.call(t,!0,n)||(t.value=n):t.value=n,s):t.value=n}},l||(u.input=s),c||(u.textarea=s),i(function(){i(e).delegate("form","submit.placeholder",function(){var t=i(".placeholder",this).each(o);setTimeout(function(){t.each(a)},10)})}),i(t).bind("beforeunload.placeholder",function(){i(".placeholder").each(function(){this.value=""})}))}(this,document,jQuery),function(t,e,i,n){var o=i("html"),a=i(t),s=i(e),r=i.fancybox=function(){r.open.apply(this,arguments)},l=navigator.userAgent.match(/msie/i),c=null,h=e.createTouch!==n,u=function(t){return t&&t.hasOwnProperty&&t instanceof i},d=function(t){return t&&"string"===i.type(t)},p=function(t){return d(t)&&0<t.indexOf("%")},f=function(t,e){var i=parseInt(t,10)||0;return e&&p(t)&&(i*=r.getViewport()[e]/100),Math.ceil(i)},g=function(t,e){return f(t,e)+"px"};i.extend(r,{version:"2.1.5",defaults:{padding:15,margin:20,width:800,height:600,minWidth:100,minHeight:100,maxWidth:9999,maxHeight:9999,pixelRatio:1,autoSize:!0,autoHeight:!1,autoWidth:!1,autoResize:!0,autoCenter:!h,fitToView:!0,aspectRatio:!1,topRatio:.5,leftRatio:.5,scrolling:"auto",wrapCSS:"",arrows:!0,closeBtn:!0,closeClick:!1,nextClick:!1,mouseWheel:!0,autoPlay:!1,playSpeed:3e3,preload:3,modal:!1,loop:!0,ajax:{dataType:"html",headers:{"X-fancyBox":!0}},iframe:{scrolling:"auto",preload:!0},swf:{wmode:"transparent",allowfullscreen:"true",allowscriptaccess:"always"},keys:{next:{13:"left",34:"up",39:"left",40:"up"},prev:{8:"right",33:"down",37:"right",38:"down"},close:[27],play:[32],toggle:[70]},direction:{next:"left",prev:"right"},scrollOutside:!0,index:0,type:null,href:null,content:null,title:null,tpl:{wrap:'<div class="fancybox-wrap" tabIndex="-1"><div class="fancybox-skin"><div class="fancybox-outer"><div class="fancybox-inner"></div></div></div></div>',image:'<img class="fancybox-image" src="{href}" alt="" />',iframe:'<iframe id="fancybox-frame{rnd}" name="fancybox-frame{rnd}" class="fancybox-iframe" frameborder="0" vspace="0" hspace="0" webkitAllowFullScreen mozallowfullscreen allowFullScreen'+(l?' allowtransparency="true"':"")+"></iframe>",error:'<p class="fancybox-error">The requested content cannot be loaded.<br/>Please try again later.</p>',closeBtn:'<a title="Close" class="fancybox-item fancybox-close" href="javascript:;"></a>',next:'<a title="Next" class="fancybox-nav fancybox-next" href="javascript:;"><span></span></a>',prev:'<a title="Previous" class="fancybox-nav fancybox-prev" href="javascript:;"><span></span></a>'},openEffect:"fade",openSpeed:250,openEasing:"swing",openOpacity:!0,openMethod:"zoomIn",closeEffect:"fade",closeSpeed:250,closeEasing:"swing",closeOpacity:!0,closeMethod:"zoomOut",nextEffect:"elastic",nextSpeed:250,nextEasing:"swing",nextMethod:"changeIn",prevEffect:"elastic",prevSpeed:250,prevEasing:"swing",prevMethod:"changeOut",helpers:{overlay:!0,title:!0},onCancel:i.noop,beforeLoad:i.noop,afterLoad:i.noop,beforeShow:i.noop,afterShow:i.noop,beforeChange:i.noop,beforeClose:i.noop,afterClose:i.noop},group:{},opts:{},previous:null,coming:null,current:null,isActive:!1,isOpen:!1,isOpened:!1,wrap:null,skin:null,outer:null,inner:null,player:{timer:null,isActive:!1},ajaxLoad:null,imgPreload:null,transitions:{},helpers:{},open:function(t,e){return t&&(i.isPlainObject(e)||(e={}),!1!==r.close(!0))?(i.isArray(t)||(t=u(t)?i(t).get():[t]),i.each(t,function(o,a){var s,l,c,h,p,f={};"object"===i.type(a)&&(a.nodeType&&(a=i(a)),u(a)?(f={href:a.data("fancybox-href")||a.attr("href"),title:a.data("fancybox-title")||a.attr("title"),isDom:!0,element:a},i.metadata&&i.extend(!0,f,a.metadata())):f=a),s=e.href||f.href||(d(a)?a:null),l=e.title!==n?e.title:f.title||"",h=(c=e.content||f.content)?"html":e.type||f.type,!h&&f.isDom&&(h=a.data("fancybox-type"),h||(h=(h=a.prop("class").match(/fancybox\.(\w+)/))?h[1]:null)),d(s)&&(h||(r.isImage(s)?h="image":r.isSWF(s)?h="swf":"#"===s.charAt(0)?h="inline":d(a)&&(h="html",c=a)),"ajax"===h&&(p=s.split(/\s+/,2),s=p.shift(),p=p.shift())),c||("inline"===h?s?c=i(d(s)?s.replace(/.*(?=#[^\s]+$)/,""):s):f.isDom&&(c=a):"html"===h?c=s:!h&&!s&&f.isDom&&(h="inline",c=a)),i.extend(f,{href:s,type:h,content:c,title:l,selector:p}),t[o]=f}),r.opts=i.extend(!0,{},r.defaults,e),e.keys!==n&&(r.opts.keys=e.keys?i.extend({},r.defaults.keys,e.keys):!1),r.group=t,r._start(r.opts.index)):void 0},cancel:function(){var t=r.coming;t&&!1!==r.trigger("onCancel")&&(r.hideLoading(),r.ajaxLoad&&r.ajaxLoad.abort(),r.ajaxLoad=null,r.imgPreload&&(r.imgPreload.onload=r.imgPreload.onerror=null),t.wrap&&t.wrap.stop(!0,!0).trigger("onReset").remove(),r.coming=null,r.current||r._afterZoomOut(t))},close:function(t){r.cancel(),!1!==r.trigger("beforeClose")&&(r.unbindEvents(),r.isActive&&(r.isOpen&&!0!==t?(r.isOpen=r.isOpened=!1,r.isClosing=!0,i(".fancybox-item, .fancybox-nav").remove(),r.wrap.stop(!0,!0).removeClass("fancybox-opened"),r.transitions[r.current.closeMethod]()):(i(".fancybox-wrap").stop(!0).trigger("onReset").remove(),r._afterZoomOut())))},play:function(t){var e=function(){clearTimeout(r.player.timer)},i=function(){e(),r.current&&r.player.isActive&&(r.player.timer=setTimeout(r.next,r.current.playSpeed))},n=function(){e(),s.unbind(".player"),r.player.isActive=!1,r.trigger("onPlayEnd")};!0===t||!r.player.isActive&&!1!==t?r.current&&(r.current.loop||r.current.index<r.group.length-1)&&(r.player.isActive=!0,s.bind({"onCancel.player beforeClose.player":n,"onUpdate.player":i,"beforeLoad.player":e}),i(),r.trigger("onPlayStart")):n()},next:function(t){var e=r.current;e&&(d(t)||(t=e.direction.next),r.jumpto(e.index+1,t,"next"))},prev:function(t){var e=r.current;e&&(d(t)||(t=e.direction.prev),r.jumpto(e.index-1,t,"prev"))},jumpto:function(t,e,i){var o=r.current;o&&(t=f(t),r.direction=e||o.direction[t>=o.index?"next":"prev"],r.router=i||"jumpto",o.loop&&(0>t&&(t=o.group.length+t%o.group.length),t%=o.group.length),o.group[t]!==n&&(r.cancel(),r._start(t)))},reposition:function(t,e){var n,o=r.current,a=o?o.wrap:null;a&&(n=r._getPosition(e),t&&"scroll"===t.type?(delete n.position,a.stop(!0,!0).animate(n,200)):(a.css(n),o.pos=i.extend({},o.dim,n)))},update:function(t){var e=t&&t.type,i=!e||"orientationchange"===e;i&&(clearTimeout(c),c=null),r.isOpen&&!c&&(c=setTimeout(function(){var n=r.current;n&&!r.isClosing&&(r.wrap.removeClass("fancybox-tmp"),(i||"load"===e||"resize"===e&&n.autoResize)&&r._setDimension(),"scroll"===e&&n.canShrink||r.reposition(t),r.trigger("onUpdate"),c=null)},i&&!h?0:300))},toggle:function(t){r.isOpen&&(r.current.fitToView="boolean"===i.type(t)?t:!r.current.fitToView,h&&(r.wrap.removeAttr("style").addClass("fancybox-tmp"),r.trigger("onUpdate")),r.update())},hideLoading:function(){s.unbind(".loading"),i("#fancybox-loading").remove()},showLoading:function(){var t,e;r.hideLoading(),t=i('<div id="fancybox-loading"><div></div></div>').click(r.cancel).appendTo("body"),s.bind("keydown.loading",function(t){27===(t.which||t.keyCode)&&(t.preventDefault(),r.cancel())}),r.defaults.fixed||(e=r.getViewport(),t.css({position:"absolute",top:.5*e.h+e.y,left:.5*e.w+e.x}))},getViewport:function(){var e=r.current&&r.current.locked||!1,i={x:a.scrollLeft(),y:a.scrollTop()};return e?(i.w=e[0].clientWidth,i.h=e[0].clientHeight):(i.w=h&&t.innerWidth?t.innerWidth:a.width(),i.h=h&&t.innerHeight?t.innerHeight:a.height()),i},unbindEvents:function(){r.wrap&&u(r.wrap)&&r.wrap.unbind(".fb"),s.unbind(".fb"),a.unbind(".fb")},bindEvents:function(){var t,e=r.current;e&&(a.bind("orientationchange.fb"+(h?"":" resize.fb")+(e.autoCenter&&!e.locked?" scroll.fb":""),r.update),(t=e.keys)&&s.bind("keydown.fb",function(o){var a=o.which||o.keyCode,s=o.target||o.srcElement;return 27===a&&r.coming?!1:(!(o.ctrlKey||o.altKey||o.shiftKey||o.metaKey||s&&(s.type||i(s).is("[contenteditable]"))||!i.each(t,function(t,s){return 1<e.group.length&&s[a]!==n?(r[t](s[a]),o.preventDefault(),!1):-1<i.inArray(a,s)?(r[t](),o.preventDefault(),!1):void 0})),void 0)}),i.fn.mousewheel&&e.mouseWheel&&r.wrap.bind("mousewheel.fb",function(t,n,o,a){for(var s=i(t.target||null),l=!1;s.length&&!l&&!s.is(".fancybox-skin")&&!s.is(".fancybox-wrap");)l=s[0]&&!(s[0].style.overflow&&"hidden"===s[0].style.overflow)&&(s[0].clientWidth&&s[0].scrollWidth>s[0].clientWidth||s[0].clientHeight&&s[0].scrollHeight>s[0].clientHeight),s=i(s).parent();0!==n&&!l&&1<r.group.length&&!e.canShrink&&(a>0||o>0?r.prev(a>0?"down":"left"):(0>a||0>o)&&r.next(0>a?"up":"right"),t.preventDefault())}))},trigger:function(t,e){var n,o=e||r.coming||r.current;if(o){if(i.isFunction(o[t])&&(n=o[t].apply(o,Array.prototype.slice.call(arguments,1))),!1===n)return!1;o.helpers&&i.each(o.helpers,function(e,n){n&&r.helpers[e]&&i.isFunction(r.helpers[e][t])&&r.helpers[e][t](i.extend(!0,{},r.helpers[e].defaults,n),o)}),s.trigger(t)}},isImage:function(t){return d(t)&&t.match(/(^data:image\/.*,)|(\.(jp(e|g|eg)|gif|png|bmp|webp|svg)((\?|#).*)?$)/i)},isSWF:function(t){return d(t)&&t.match(/\.(swf)((\?|#).*)?$/i)},_start:function(t){var e,n,o={};if(t=f(t),e=r.group[t]||null,!e)return!1;if(o=i.extend(!0,{},r.opts,e),e=o.margin,n=o.padding,"number"===i.type(e)&&(o.margin=[e,e,e,e]),"number"===i.type(n)&&(o.padding=[n,n,n,n]),o.modal&&i.extend(!0,o,{closeBtn:!1,closeClick:!1,nextClick:!1,arrows:!1,mouseWheel:!1,keys:null,helpers:{overlay:{closeClick:!1}}}),o.autoSize&&(o.autoWidth=o.autoHeight=!0),"auto"===o.width&&(o.autoWidth=!0),"auto"===o.height&&(o.autoHeight=!0),o.group=r.group,o.index=t,r.coming=o,!1===r.trigger("beforeLoad"))r.coming=null;else{if(n=o.type,e=o.href,!n)return r.coming=null,r.current&&r.router&&"jumpto"!==r.router?(r.current.index=t,r[r.router](r.direction)):!1;if(r.isActive=!0,("image"===n||"swf"===n)&&(o.autoHeight=o.autoWidth=!1,o.scrolling="visible"),"image"===n&&(o.aspectRatio=!0),"iframe"===n&&h&&(o.scrolling="scroll"),o.wrap=i(o.tpl.wrap).addClass("fancybox-"+(h?"mobile":"desktop")+" fancybox-type-"+n+" fancybox-tmp "+o.wrapCSS).appendTo(o.parent||"body"),i.extend(o,{skin:i(".fancybox-skin",o.wrap),outer:i(".fancybox-outer",o.wrap),inner:i(".fancybox-inner",o.wrap)}),i.each(["Top","Right","Bottom","Left"],function(t,e){o.skin.css("padding"+e,g(o.padding[t]))}),r.trigger("onReady"),"inline"===n||"html"===n){if(!o.content||!o.content.length)return r._error("content")}else if(!e)return r._error("href");"image"===n?r._loadImage():"ajax"===n?r._loadAjax():"iframe"===n?r._loadIframe():r._afterLoad()}},_error:function(t){i.extend(r.coming,{type:"html",autoWidth:!0,autoHeight:!0,minWidth:0,minHeight:0,scrolling:"no",hasError:t,content:r.coming.tpl.error}),r._afterLoad()},_loadImage:function(){var t=r.imgPreload=new Image;t.onload=function(){this.onload=this.onerror=null,r.coming.width=this.width/r.opts.pixelRatio,r.coming.height=this.height/r.opts.pixelRatio,r._afterLoad()
},t.onerror=function(){this.onload=this.onerror=null,r._error("image")},t.src=r.coming.href,!0!==t.complete&&r.showLoading()},_loadAjax:function(){var t=r.coming;r.showLoading(),r.ajaxLoad=i.ajax(i.extend({},t.ajax,{url:t.href,error:function(t,e){r.coming&&"abort"!==e?r._error("ajax",t):r.hideLoading()},success:function(e,i){"success"===i&&(t.content=e,r._afterLoad())}}))},_loadIframe:function(){var t=r.coming,e=i(t.tpl.iframe.replace(/\{rnd\}/g,(new Date).getTime())).attr("scrolling",h?"auto":t.iframe.scrolling).attr("src",t.href);i(t.wrap).bind("onReset",function(){try{i(this).find("iframe").hide().attr("src","//about:blank").end().empty()}catch(t){}}),t.iframe.preload&&(r.showLoading(),e.one("load",function(){i(this).data("ready",1),h||i(this).bind("load.fb",r.update),i(this).parents(".fancybox-wrap").width("100%").removeClass("fancybox-tmp").show(),r._afterLoad()})),t.content=e.appendTo(t.inner),t.iframe.preload||r._afterLoad()},_preloadImages:function(){var t,e,i=r.group,n=r.current,o=i.length,a=n.preload?Math.min(n.preload,o-1):0;for(e=1;a>=e;e+=1)t=i[(n.index+e)%o],"image"===t.type&&t.href&&((new Image).src=t.href)},_afterLoad:function(){var t,e,n,o,a,s=r.coming,l=r.current;if(r.hideLoading(),s&&!1!==r.isActive)if(!1===r.trigger("afterLoad",s,l))s.wrap.stop(!0).trigger("onReset").remove(),r.coming=null;else{switch(l&&(r.trigger("beforeChange",l),l.wrap.stop(!0).removeClass("fancybox-opened").find(".fancybox-item, .fancybox-nav").remove()),r.unbindEvents(),t=s.content,e=s.type,n=s.scrolling,i.extend(r,{wrap:s.wrap,skin:s.skin,outer:s.outer,inner:s.inner,current:s,previous:l}),o=s.href,e){case"inline":case"ajax":case"html":s.selector?t=i("<div>").html(t).find(s.selector):u(t)&&(t.data("fancybox-placeholder")||t.data("fancybox-placeholder",i('<div class="fancybox-placeholder"></div>').insertAfter(t).hide()),t=t.show().detach(),s.wrap.bind("onReset",function(){i(this).find(t).length&&t.hide().replaceAll(t.data("fancybox-placeholder")).data("fancybox-placeholder",!1)}));break;case"image":t=s.tpl.image.replace("{href}",o);break;case"swf":t='<object id="fancybox-swf" classid="clsid:D27CDB6E-AE6D-11cf-96B8-444553540000" width="100%" height="100%"><param name="movie" value="'+o+'"></param>',a="",i.each(s.swf,function(e,i){t+='<param name="'+e+'" value="'+i+'"></param>',a+=" "+e+'="'+i+'"'}),t+='<embed src="'+o+'" type="application/x-shockwave-flash" width="100%" height="100%"'+a+"></embed></object>"}(!u(t)||!t.parent().is(s.inner))&&s.inner.append(t),r.trigger("beforeShow"),s.inner.css("overflow","yes"===n?"scroll":"no"===n?"hidden":n),r._setDimension(),r.reposition(),r.isOpen=!1,r.coming=null,r.bindEvents(),r.isOpened?l.prevMethod&&r.transitions[l.prevMethod]():i(".fancybox-wrap").not(s.wrap).stop(!0).trigger("onReset").remove(),r.transitions[r.isOpened?s.nextMethod:s.openMethod](),r._preloadImages()}},_setDimension:function(){var t,e,n,o,a,s,l,c,h,u=r.getViewport(),d=0,m=!1,y=!1,m=r.wrap,b=r.skin,v=r.inner,x=r.current,y=x.width,w=x.height,k=x.minWidth,$=x.minHeight,C=x.maxWidth,G=x.maxHeight,T=x.scrolling,I=x.scrollOutside?x.scrollbarWidth:0,S=x.margin,M=f(S[1]+S[3]),z=f(S[0]+S[2]);if(m.add(b).add(v).width("auto").height("auto").removeClass("fancybox-tmp"),S=f(b.outerWidth(!0)-b.width()),t=f(b.outerHeight(!0)-b.height()),e=M+S,n=z+t,o=p(y)?(u.w-e)*f(y)/100:y,a=p(w)?(u.h-n)*f(w)/100:w,"iframe"===x.type){if(h=x.content,x.autoHeight&&1===h.data("ready"))try{h[0].contentWindow.document.location&&(v.width(o).height(9999),s=h.contents().find("body"),I&&s.css("overflow-x","hidden"),a=s.outerHeight(!0))}catch(E){}}else(x.autoWidth||x.autoHeight)&&(v.addClass("fancybox-tmp"),x.autoWidth||v.width(o),x.autoHeight||v.height(a),x.autoWidth&&(o=v.width()),x.autoHeight&&(a=v.height()),v.removeClass("fancybox-tmp"));if(y=f(o),w=f(a),c=o/a,k=f(p(k)?f(k,"w")-e:k),C=f(p(C)?f(C,"w")-e:C),$=f(p($)?f($,"h")-n:$),G=f(p(G)?f(G,"h")-n:G),s=C,l=G,x.fitToView&&(C=Math.min(u.w-e,C),G=Math.min(u.h-n,G)),e=u.w-M,z=u.h-z,x.aspectRatio?(y>C&&(y=C,w=f(y/c)),w>G&&(w=G,y=f(w*c)),k>y&&(y=k,w=f(y/c)),$>w&&(w=$,y=f(w*c))):(y=Math.max(k,Math.min(y,C)),x.autoHeight&&"iframe"!==x.type&&(v.width(y),w=v.height()),w=Math.max($,Math.min(w,G))),x.fitToView)if(v.width(y).height(w),m.width(y+S),u=m.width(),M=m.height(),x.aspectRatio)for(;(u>e||M>z)&&y>k&&w>$&&!(19<d++);)w=Math.max($,Math.min(G,w-10)),y=f(w*c),k>y&&(y=k,w=f(y/c)),y>C&&(y=C,w=f(y/c)),v.width(y).height(w),m.width(y+S),u=m.width(),M=m.height();else y=Math.max(k,Math.min(y,y-(u-e))),w=Math.max($,Math.min(w,w-(M-z)));I&&"auto"===T&&a>w&&e>y+S+I&&(y+=I),v.width(y).height(w),m.width(y+S),u=m.width(),M=m.height(),m=(u>e||M>z)&&y>k&&w>$,y=x.aspectRatio?s>y&&l>w&&o>y&&a>w:(s>y||l>w)&&(o>y||a>w),i.extend(x,{dim:{width:g(u),height:g(M)},origWidth:o,origHeight:a,canShrink:m,canExpand:y,wPadding:S,hPadding:t,wrapSpace:M-b.outerHeight(!0),skinSpace:b.height()-w}),!h&&x.autoHeight&&w>$&&G>w&&!y&&v.height("auto")},_getPosition:function(t){var e=r.current,i=r.getViewport(),n=e.margin,o=r.wrap.width()+n[1]+n[3],a=r.wrap.height()+n[0]+n[2],n={position:"absolute",top:n[0],left:n[3]};return e.autoCenter&&e.fixed&&!t&&a<=i.h&&o<=i.w?n.position="fixed":e.locked||(n.top+=i.y,n.left+=i.x),n.top=g(Math.max(n.top,n.top+(i.h-a)*e.topRatio)),n.left=g(Math.max(n.left,n.left+(i.w-o)*e.leftRatio)),n},_afterZoomIn:function(){var t=r.current;t&&(r.isOpen=r.isOpened=!0,r.wrap.css("overflow","visible").addClass("fancybox-opened"),r.update(),(t.closeClick||t.nextClick&&1<r.group.length)&&r.inner.css("cursor","pointer").bind("click.fb",function(e){!i(e.target).is("a")&&!i(e.target).parent().is("a")&&(e.preventDefault(),r[t.closeClick?"close":"next"]())}),t.closeBtn&&i(t.tpl.closeBtn).appendTo(r.skin).bind("click.fb",function(t){t.preventDefault(),r.close()}),t.arrows&&1<r.group.length&&((t.loop||0<t.index)&&i(t.tpl.prev).appendTo(r.outer).bind("click.fb",r.prev),(t.loop||t.index<r.group.length-1)&&i(t.tpl.next).appendTo(r.outer).bind("click.fb",r.next)),r.trigger("afterShow"),t.loop||t.index!==t.group.length-1?r.opts.autoPlay&&!r.player.isActive&&(r.opts.autoPlay=!1,r.play()):r.play(!1))},_afterZoomOut:function(t){t=t||r.current,i(".fancybox-wrap").trigger("onReset").remove(),i.extend(r,{group:{},opts:{},router:!1,current:null,isActive:!1,isOpened:!1,isOpen:!1,isClosing:!1,wrap:null,skin:null,outer:null,inner:null}),r.trigger("afterClose",t)}}),r.transitions={getOrigPosition:function(){var t=r.current,e=t.element,i=t.orig,n={},o=50,a=50,s=t.hPadding,l=t.wPadding,c=r.getViewport();return!i&&t.isDom&&e.is(":visible")&&(i=e.find("img:first"),i.length||(i=e)),u(i)?(n=i.offset(),i.is("img")&&(o=i.outerWidth(),a=i.outerHeight())):(n.top=c.y+(c.h-a)*t.topRatio,n.left=c.x+(c.w-o)*t.leftRatio),("fixed"===r.wrap.css("position")||t.locked)&&(n.top-=c.y,n.left-=c.x),n={top:g(n.top-s*t.topRatio),left:g(n.left-l*t.leftRatio),width:g(o+l),height:g(a+s)}},step:function(t,e){var i,n,o=e.prop;n=r.current;var a=n.wrapSpace,s=n.skinSpace;("width"===o||"height"===o)&&(i=e.end===e.start?1:(t-e.start)/(e.end-e.start),r.isClosing&&(i=1-i),n="width"===o?n.wPadding:n.hPadding,n=t-n,r.skin[o](f("width"===o?n:n-a*i)),r.inner[o](f("width"===o?n:n-a*i-s*i)))},zoomIn:function(){var t=r.current,e=t.pos,n=t.openEffect,o="elastic"===n,a=i.extend({opacity:1},e);delete a.position,o?(e=this.getOrigPosition(),t.openOpacity&&(e.opacity=.1)):"fade"===n&&(e.opacity=.1),r.wrap.css(e).animate(a,{duration:"none"===n?0:t.openSpeed,easing:t.openEasing,step:o?this.step:null,complete:r._afterZoomIn})},zoomOut:function(){var t=r.current,e=t.closeEffect,i="elastic"===e,n={opacity:.1};i&&(n=this.getOrigPosition(),t.closeOpacity&&(n.opacity=.1)),r.wrap.animate(n,{duration:"none"===e?0:t.closeSpeed,easing:t.closeEasing,step:i?this.step:null,complete:r._afterZoomOut})},changeIn:function(){var t,e=r.current,i=e.nextEffect,n=e.pos,o={opacity:1},a=r.direction;n.opacity=.1,"elastic"===i&&(t="down"===a||"up"===a?"top":"left","down"===a||"right"===a?(n[t]=g(f(n[t])-200),o[t]="+=200px"):(n[t]=g(f(n[t])+200),o[t]="-=200px")),"none"===i?r._afterZoomIn():r.wrap.css(n).animate(o,{duration:e.nextSpeed,easing:e.nextEasing,complete:r._afterZoomIn})},changeOut:function(){var t=r.previous,e=t.prevEffect,n={opacity:.1},o=r.direction;"elastic"===e&&(n["down"===o||"up"===o?"top":"left"]=("up"===o||"left"===o?"-":"+")+"=200px"),t.wrap.animate(n,{duration:"none"===e?0:t.prevSpeed,easing:t.prevEasing,complete:function(){i(this).trigger("onReset").remove()}})}},r.helpers.overlay={defaults:{closeClick:!0,speedOut:200,showEarly:!0,css:{},locked:!h,fixed:!0},overlay:null,fixed:!1,el:i("html"),create:function(t){t=i.extend({},this.defaults,t),this.overlay&&this.close(),this.overlay=i('<div class="fancybox-overlay"></div>').appendTo(r.coming?r.coming.parent:t.parent),this.fixed=!1,t.fixed&&r.defaults.fixed&&(this.overlay.addClass("fancybox-overlay-fixed"),this.fixed=!0)},open:function(t){var e=this;t=i.extend({},this.defaults,t),this.overlay?this.overlay.unbind(".overlay").width("auto").height("auto"):this.create(t),this.fixed||(a.bind("resize.overlay",i.proxy(this.update,this)),this.update()),t.closeClick&&this.overlay.bind("click.overlay",function(t){return i(t.target).hasClass("fancybox-overlay")?(r.isActive?r.close():e.close(),!1):void 0}),this.overlay.css(t.css).show()},close:function(){var t,e;a.unbind("resize.overlay"),this.el.hasClass("fancybox-lock")&&(i(".fancybox-margin").removeClass("fancybox-margin"),t=a.scrollTop(),e=a.scrollLeft(),this.el.removeClass("fancybox-lock"),a.scrollTop(t).scrollLeft(e)),i(".fancybox-overlay").remove().hide(),i.extend(this,{overlay:null,fixed:!1})},update:function(){var t,i="100%";this.overlay.width(i).height("100%"),l?(t=Math.max(e.documentElement.offsetWidth,e.body.offsetWidth),s.width()>t&&(i=s.width())):s.width()>a.width()&&(i=s.width()),this.overlay.width(i).height(s.height())},onReady:function(t,e){var n=this.overlay;i(".fancybox-overlay").stop(!0,!0),n||this.create(t),t.locked&&this.fixed&&e.fixed&&(n||(this.margin=s.height()>a.height()?i("html").css("margin-right").replace("px",""):!1),e.locked=this.overlay.append(e.wrap),e.fixed=!1),!0===t.showEarly&&this.beforeShow.apply(this,arguments)},beforeShow:function(t,e){var n,o;e.locked&&(!1!==this.margin&&(i("*").filter(function(){return"fixed"===i(this).css("position")&&!i(this).hasClass("fancybox-overlay")&&!i(this).hasClass("fancybox-wrap")}).addClass("fancybox-margin"),this.el.addClass("fancybox-margin")),n=a.scrollTop(),o=a.scrollLeft(),this.el.addClass("fancybox-lock"),a.scrollTop(n).scrollLeft(o)),this.open(t)},onUpdate:function(){this.fixed||this.update()},afterClose:function(t){this.overlay&&!r.coming&&this.overlay.fadeOut(t.speedOut,i.proxy(this.close,this))}},r.helpers.title={defaults:{type:"float",position:"bottom"},beforeShow:function(t){var e=r.current,n=e.title,o=t.type;if(i.isFunction(n)&&(n=n.call(e.element,e)),d(n)&&""!==i.trim(n)){switch(e=i('<div class="fancybox-title fancybox-title-'+o+'-wrap">'+n+"</div>"),o){case"inside":o=r.skin;break;case"outside":o=r.wrap;break;case"over":o=r.inner;break;default:o=r.skin,e.appendTo("body"),l&&e.width(e.width()),e.wrapInner('<span class="child"></span>'),r.current.margin[2]+=Math.abs(f(e.css("margin-bottom")))}e["top"===t.position?"prependTo":"appendTo"](o)}}},i.fn.fancybox=function(t){var e,n=i(this),o=this.selector||"",a=function(a){var s,l,c=i(this).blur(),h=e;!(a.ctrlKey||a.altKey||a.shiftKey||a.metaKey||c.is(".fancybox-wrap")||(s=t.groupAttr||"data-fancybox-group",l=c.attr(s),l||(s="rel",l=c.get(0)[s]),l&&""!==l&&"nofollow"!==l&&(c=o.length?i(o):n,c=c.filter("["+s+'="'+l+'"]'),h=c.index(this)),t.index=h,!1===r.open(c,t)||!a.preventDefault()))};return t=t||{},e=t.index||0,o&&!1!==t.live?s.undelegate(o,"click.fb-start").delegate(o+":not('.fancybox-item, .fancybox-nav')","click.fb-start",a):n.unbind("click.fb-start").bind("click.fb-start",a),this.filter("[data-fancybox-start=1]").trigger("click"),this},s.ready(function(){var e,a;if(i.scrollbarWidth===n&&(i.scrollbarWidth=function(){var t=i('<div style="width:50px;height:50px;overflow:auto"><div/></div>').appendTo("body"),e=t.children(),e=e.innerWidth()-e.height(99).innerWidth();return t.remove(),e}),i.support.fixedPosition===n){e=i.support,a=i('<div style="position:fixed;top:20px;"></div>').appendTo("body");var s=20===a[0].offsetTop||15===a[0].offsetTop;a.remove(),e.fixedPosition=s}i.extend(r.defaults,{scrollbarWidth:i.scrollbarWidth(),fixed:i.support.fixedPosition,parent:i("body")}),e=i(t).width(),o.addClass("fancybox-lock-test"),a=i(t).width(),o.removeClass("fancybox-lock-test"),i("<style type='text/css'>.fancybox-margin{margin-right:"+(a-e)+"px;}</style>").appendTo("head")})}(window,document,jQuery);